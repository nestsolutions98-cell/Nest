<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details - Sports Club Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/course.css') }}">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap justify-between h-auto min-h-16 gap-y-2">
                <div class="flex items-center max-w-full overflow-hidden">
                    <a href="/" class="text-xl font-bold text-gray-900 hover:text-blue-600">
                        <i class="fas fa-dumbbell text-blue-600 mr-2"></i>
                        Sports Club Management
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="btn btn-primary">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Calendar
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div id="courseContent" class="overflow-x-auto">
            <!-- Course details will be loaded here -->
        </div>
        <!-- Add Meeting Modal -->
        <div id="addMeetingModal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 px-4">
            <div class="modal-content w-full max-w-md px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold" data-i18n="Add Meeting">Add Meeting</h3>
                    <button class="close-modal text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                <div class="form-group">
                    <label class="form-label" for="meetingDate" data-i18n="Date">Date</label>
                    <input type="date" id="meetingDate" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label" for="meetingNotes" data-i18n="Notes">Notes</label>
                    <textarea id="meetingNotes" class="form-input" rows="2" data-i18n-placeholder="Enter notes..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="Attendance">Attendance</label>
                    <div id="attendanceStudentsList" class="max-h-60 overflow-y-auto mb-4"></div>
                </div>
                <div class="flex space-x-2">
                    <button id="saveMeetingBtn" class="btn btn-success flex-1" data-i18n="Save">Save</button>
                    <button class="btn btn-danger flex-1 close-modal" data-i18n="Cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div class="bg-white rounded-lg shadow-sm p-6 mt-8">
            <div id="meetingsLogSection">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold" data-i18n="Meetings Log">Meetings Log</h3>
                    <button id="addMeetingBtn" class="btn btn-success flex items-center gap-2" data-i18n="Add Meeting">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                        Add Meeting
                    </button>
                </div>
                <div id="meetingsList" class="overflow-x-auto">
                    <!-- Meetings will be rendered here by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="addStudentModal" class="modal">
        <div class="modal-content w-full max-w-md px-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Add Student to Course</h3>
                <button class="close-modal text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>

            <div class="mb-4">
                <label class="form-label">Search Students</label>
                <input type="text" id="studentSearchInCourse" placeholder="Search by name, phone, or ID..."
                       class="form-input">
            </div>

            <div id="availableStudentsList" class="max-h-60 overflow-y-auto mb-4">
                <!-- Available students will be listed here -->
            </div>

            <div class="flex space-x-2">
                <button class="btn btn-primary flex-1" onclick="enrollSelectedStudent()">
                    <i class="fas fa-plus mr-2"></i>Enroll Student
                </button>
                <button class="btn btn-danger flex-1 close-modal">Cancel</button>
            </div>
        </div>
    </div>

    <!-- WhatsApp Message Modal -->
    <div id="whatsappModal" class="modal">
        <div class="modal-content w-full max-w-md mx-auto p-4 sm:p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Send WhatsApp Message</h3>
                <button class="close-modal text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>

            <div class="form-group">
                <label class="form-label">Message</label>
                <textarea id="whatsappMessage" class="form-input" rows="4"
                          placeholder="Enter your message here..."></textarea>
            </div>

            <div class="flex flex-col sm:flex-row gap-2">
                <button id="sendWhatsAppMessageBtn" class="btn btn-success flex-1">
                    <i class="fab fa-whatsapp mr-2"></i>Send Message
                </button>
                <button class="btn btn-danger flex-1 close-modal">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Student Profile Modal -->
    <div id="studentProfileModal" class="modal">
        <div class="modal-content w-full max-w-md mx-auto p-4 sm:p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="studentProfileTitle">Student Profile</h3>
                <button class="close-modal text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <div class="form-group">
                <div id="studentProfileContent"></div>
            </div>
            <div class="flex flex-col sm:flex-row gap-2 mt-4">
                <button class="btn btn-primary flex-1" onclick="closeAllModals()">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Course Modal -->
    <div id="editCourseModal" class="modal hidden">
        <div class="modal-content w-full max-w-md mx-auto p-4 sm:p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Edit Course</h3>
                <button onclick="closeEditCourseModal()" class="close-modal text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <form onsubmit="event.preventDefault(); saveCourseEdits();">
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Name</label>
                    <input id="editCourseName" class="form-input w-full" required />
                </div>
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Teacher</label>
                    <input id="editCourseTeacher" class="form-input w-full" required />
                </div>
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Time</label>
                    <input id="editCourseTime" class="form-input w-full" required />
                </div>
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Sessions Count</label>
                    <input id="editCourseSessions" type="number" class="form-input w-full" required />
                </div>
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Weekdays (comma separated, 0=Sun)</label>
                    <input id="editCourseWeekdays" class="form-input w-full" required />
                </div>
                <div class="mb-2">
                    <label class="block font-semibold mb-1">Color</label>
                    <input id="editCourseColor" class="form-input w-full" required />
                </div>
                <div class="flex flex-col sm:flex-row gap-2 mt-4">
                    <button type="button" onclick="closeEditCourseModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/course.js') }}"></script>
</body>
</html>